<!-- movies/templates/movies/movie_detail.html -->
{% extends "movies/base.html" %}
{% load static %}
{% block title %}{{ movie.title }}{% endblock %}
{% block content %}
<div class="row g-4">
    <div class="col-md-4">
        {% if movie.poster_url %}
        <img src="{{ movie.poster_url.url }}" class="img-fluid rounded shadow-sm" alt="{{ movie.title }}">
        {% else %}
        <img src="{% static 'movies/img/placeholder.svg' %}" class="img-fluid rounded shadow-sm" alt="No image">
        {% endif %}
    </div>
    <div class="col-md-8">
        <h1>{{ movie.title }}</h1>
        <p class="text-muted">{{ movie.genre }} {% if movie.runtime %} â€¢ {{ movie.runtime }}m{% endif %}</p>
        <p class="lead text-light">{{ movie.description }}</p>

        <h4 class="mt-4">Showtimes</h4>
        {% if showtimes %}
        <div class="row g-3 mt-2">
            {% for s in showtimes %}
            <div class="col-sm-6 col-lg-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <p class="mb-1">{{ s.start_time|date:"M d, Y" }}</p>
                        <p class="h4 mb-1">{{ s.start_time|date:"g:i A" }}</p>
                        <p class="text-muted">${{ s.price }}</p>
                        <a href="{% url 'movies:booking' s.id %}" class="btn btn-outline-primary mt-2 w-100">Book
                            Now</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p class="text-muted">No showtimes available</p>
        {% endif %}
    </div>
</div>
{% endblock %}